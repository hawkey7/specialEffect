<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
<style type="text/css">
	label { font-size: 13px; }

</style>
 </head>
  
<body>
<form action="" onsubmit="return checkform()" >
	<table width="449" height="530" border="1" align='center'>
	  <tr>
		<td colspan="2" align="center">用户名注册</td>
		</tr>
	  <tr>
		<td width="116" align="right">姓名：</td>
		<td width="323">
		<input type="text" name="" id="name" /><label>  
		</label></td>
	  </tr>
	  <tr>
		<td width="116" align="right">性别：</td>
		<td width="323">
		  <input type="radio" name="sex" id="" />男
		   <input type="radio" name="sex" id="" />女
		<label id="sexLabel"></label></td>
	  </tr>
	  <tr>
		<td align="right">年龄：</td>
		<td>
		  <input type="text" name="" id="age" />
		<label></label></td>
	  </tr>
	  <tr>
		<td align="right">密码：</td>
		<td>
		  <input type="password" name="" id="pwd" />
		<label></label></td>
	  </tr>
	  <tr>
		<td align="right">确认密码：</td>
		<td>
		  <input type="password" name="" id="qpwd" />
		<label></label></td>
	  </tr>
	  <tr>
		<td align="right">手机：</td>
		<td>
		  <input type="text" name="" id="tel" />
		<label></label></td>
	  </tr>
	  <tr>
		<td align="right">QQ:</td>
		<td>
		  <input type="text" name="" id="qq" />
		<label></label></td>
	  </tr>
	  <tr>
		<td align="right">邮箱：</td>
		<td>
		  <input type="text" name="" id="email" />
		<label></label></td>
	  </tr>
	  <tr>
		<td align="right">邮编：</td>
		<td>
		  <input type="text" name="" id="eml" />
		<label></label></td>
	  </tr>
	  <tr>
		<td align="right">身份证：</td>
		<td>
		  <input type="text" name="" id="sname" />
		<label></label></td>
	  </tr>
	  <tr>
		<td align="right">验证码：</td>
		<td>
		  <input type="text" id="checkma" />
		  <span style="width:80px;height: 20px;border: 1px solid red;display: inline-block;" id="yzm"></span>
		  <a href="#" id="next">看不清</a>
		<label></label></td>
	  </tr>
		<tr>
		<td align="right">爱好：</td>
		<td>
		<input type="checkbox" name="a" id="c1">
		足球
		<input type="checkbox" name="a" id="c2">
		篮球
		<input type="checkbox" name="a" id="c3">
		排球
		<input type="checkbox" name="a" id="c4">
		网球
		<label id="labelHobby"></label></td>
	  </tr>
	  <tr>
		<td height="36" colspan="2" align="center"><label>
		  <input type="submit" value="注册"  />
		</label></td>
		</tr>
	</table>
</form>
</body>
</html>
<script type="text/javascript">
	
	 // 要求：
	 // 	1、使用失去焦点事件完成表单验证  每一项验证失去焦点时都可以即时验证
	 // 	2、姓名： 单词字符组成  6--10为 ，不能用数字开头
	 // 	      年龄： 只能由数字组成  年龄不能为负数
	 // 	      密码：6--18位字符组成       有密码强弱验证 
	 // 	3、确认密码和密码相同
	 // 	4、手机号： 15  13  18 开头
	 // 	5、qq ： 5--12位数字  第一位不能是数字
	 // 	6、邮箱： 必须有@符号
	 // 	7、邮编：6为数字
	 // 	8、身份证： 18位   最后一位考虑有x
	 // 	9、验证码  
	 // 		输入的验证码必须和红色框中的相同，  点击看不清可以实现验证码的切换
	 // 		验证码由字母  数字组成
	 // 	10、爱好和性别必选	
	function $(id){
		return document.getElementById(id);
	}

	var flagName = null;
	var reg = /^[a-z]\w{5,9}$/;
	$("name").onblur = function(){
		if ( reg.test($("name").value) ){
			this.parentNode.children[1].innerHTML = "正确";
			flagName = true;
		}else{
			this.parentNode.children[1].innerHTML = "6-10位字符非数字开头";
			flagName = false;
		}
	}

	function checkSex(){
		if ( !(document.getElementsByName("sex")[0].checked || document.getElementsByName("sex")[1].checked) ){
			document.getElementById("sexLabel").innerHTML = "请选择性别";
			return false;
		}else{
			document.getElementById("sexLabel").innerHTML = "";
			return true;
		}
	}

	var flagAge = null;
	var reg = /^\d*$/;
	$("age").onblur = function(){
		if ( reg.test($("age").value) ){
			this.parentNode.children[1].innerHTML = "正确";
			flagAge = true;
		}else{
			this.parentNode.children[1].innerHTML = "请输入数字";
			flagAge = false;
		}
	}

	var flagPwd = null;
	var reg = /^\w{6,18}$/;
	$("pwd").onblur = function(){
		if ( reg.test($("pwd").value) ){
			this.parentNode.children[1].innerHTML = "正确";
			flagPwd = true;
		}else{
			this.parentNode.children[1].innerHTML = "请输入6-18位数字";
			flagPwd = false;
		}
	}

	var flagQpwd = null ;
	$("qpwd").onblur = function(){
		if ( $("qpwd").value == $("pwd").value ){
			this.parentNode.children[1].innerHTML = "正确";
			flagQpwd = true;
		}else{
			this.parentNode.children[1].innerHTML = "请输入相同的密码";
			flagQpwd = false;
		}
	}

	var flagTel = null;
	var reg1 = /^15\d{9}$/;
	var reg2 = /^13\d{9}$/;
	var reg3 = /^18\d{9}$/;
	$("tel").onblur = function(){
		if ( reg1.test($("tel").value) ||  reg2.test($("tel").value) ||  reg3.test($("tel").value) ){
			this.parentNode.children[1].innerHTML = "正确";
			flagTel = true;
		}else{
			this.parentNode.children[1].innerHTML = "请确认正确的手机号";
			flagTel = false;
		}
	}

	var flagQq = null ;
	var reg = /^[1-9]\d{4,11}$/;
	$("qq").onblur = function(){
		if ( reg.test($("qq").value) ){
			this.parentNode.children[1].innerHTML = "正确";
			flagQq = true;
		}else{
			this.parentNode.children[1].innerHTML = "请输入正确QQ";
			flagQq = false;
		}
	}

	var flagEmail = null ;
	var reg = /\@/;
	$("email").onblur = function(){
		if ( reg.test($("email").value) ){
			this.parentNode.children[1].innerHTML = "正确";
			flagEmail = true;
		}else{
			this.parentNode.children[1].innerHTML = "请输入正确的email";
			flagEmail = false;
		}
	}

	var flagEml = null ;
	var reg = /^\d{6}$/;
	$("eml").onblur = function(){
		if ( reg.test($("eml").value) ){
			this.parentNode.children[1].innerHTML = "正确";
			flagEml = true;
		}else{
			this.parentNode.children[1].innerHTML = "请输入正确的邮编";
			flagEml = false;
		}
	}

	var flagSname = null ;
	var reg = /^\d{17}([x0-9])$/;
	$("sname").onblur = function(){
		if ( reg.test($("sname").value) ){
			this.parentNode.children[1].innerHTML = "正确";
			flagSname = true;
		}else{
			this.parentNode.children[1].innerHTML = "身份证号码非法";
			flagSname = false;
		}
	}

	
	function rand(min,max){
		return Math.floor( Math.random()*(max-min+1) ) + min;
	}
	function getyzm(){
		//思路：  在code值为 48 -- 122之间随机获取一个值   
		//     如果  值在  58--64  或   91--96  之间  就重新抽  
		var arr = [];//存放抽中的字符
		/*for( var i = 0; i < 4 ; i++ ){
			var code = rand(48,122);
			if( code >= 58 && code <= 64   ||  code >= 91 && code <= 96 ){
				i--;//重抽
			}else{
				arr[i] = String.fromCharCode(code);
			}
		}
		$("txt").value = arr.join("");*/
		
		for(var i = 0 ; i < 4 ; i++){
			var code = rand(48,122);
			while( code >= 58 && code <= 64   ||  code >= 91 && code <= 96 ){ //重抽
				code = rand(48,122);
			}
			arr[i] = String.fromCharCode(code);
		}
		$("yzm").innerHTML = arr.join("");
	}
	 getyzm();
	$("next").onclick = getyzm;

	var flagCheckma = null ;
	$("checkma").onblur = function(){
		if ( $("checkma").value == $("yzm").innerHTML ){
			this.parentNode.children[3].innerHTML = "正确";
			flagCheckma = true;
		}else{
			this.parentNode.children[3].innerHTML = "请输入正确验证码";
			flagCheckma = false;
		}
	}

	function checkHobby(){
		if ( !(document.getElementsByName("a")[0].checked || document.getElementsByName("a")[1].checked || document.getElementsByName("a")[2].checked || document.getElementsByName("a")[3].checked )  ){
			document.getElementById("labelHobby").innerHTML = "请选择爱好";
			return false;
		}else{
			document.getElementById("labelHobby").innerHTML = "";
			return true;
		}
	}


	function checkform( ){
		checkSex();
		checkHobby();
		if ( flagName && checkSex() && flagAge && flagPwd && flagQpwd && flagTel && flagQq && flagEmail &&flagEml &&flagSname &&flagCheckma &&checkHobby() ){
			return true;
		}else{
			return false;
		}
	}
	 
</script>
